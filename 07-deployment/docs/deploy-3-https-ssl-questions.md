# [DEPLOY-3단계] 질문노트: HTTPS / SSL 인증 (https-ssl)

> 💬 봄이가 직접 궁금해서 물어본 것들 + 온이의 설명 요약
> 
> 
> (코드: EC2 내부 Certbot + HTTPS 설정 실습 기준)
> 

---

### 💡 1. standalone 방식이 정확히 뭐야?

| 질문 | 답변 요약 |
| --- | --- |
| standalone 모드가 어떤 원리야? | Certbot이 직접 임시 웹서버를 띄워 80포트를 점유한 뒤, Let's Encrypt의 HTTP 인증을 받는 방식이야. |
| 왜 80포트를 Certbot이 잡아야 돼? | HTTP-01 인증은 “인증기관 → 서버(80포트)”로 직접 요청을 보내 검증하기 때문이야. |
| 왜 Nginx를 끄라고 해? | Nginx가 이미 80포트를 사용 중이면 Certbot이 포트를 못 열어서 인증 실패가 나기 때문이야. |
| 실무에서도 standalone을 써? | 아니야. 실무는 보통 `--nginx` 방식이나 DNS-01 인증을 사용해 Nginx를 끄지 않아도 돼. |

---

### 💡 2. 인증서 갱신(dry-run)이 왜 실패했어?

| 질문 | 답변 요약 |
| --- | --- |
| 갱신은 자동이라 했는데 왜 실패하지? | renewal 설정이 “standalone”이라 갱신 테스트도 80포트를 열어야 했다. |
| 그럼 왜 충돌났어? | 갱신 테스트할 때도 Nginx가 80포트를 사용 중이었기 때문이야. |
| 지금 서버에 문제 있는 거야? | 아니야! 인증서는 이미 발급되어 있고, 문제는 “갱신 테스트”에서만 발생했어. |
| 실제 갱신은 어떻게 해야 해? | standalone 방식에서는 갱신 시 `nginx stop → certbot renew → nginx start` 흐름으로 처리해야 해. |

---

### 💡 3. 왜 IP.nip.io 로도 HTTPS가 되는 거야?

| 질문 | 답변 요약 |
| --- | --- |
| 도메인도 아닌데 인증서 발급이 되네? | `nip.io` 서비스가 “IP를 자동으로 도메인처럼 매핑”해주는 구조라서 가능해. |
| 그러면 Let’s Encrypt는 그걸 신뢰해? | nip.io는 정상적인 DNS 응답을 반환하므로 인증기관도 정식 도메인처럼 검증을 진행할 수 있어. |
| 그럼 실무에서도 써도 돼? | 실무용 도메인으로는 절대 ❌, 오직 테스트·실습용으로만 사용해야 해. |

---

### 💡 4. HTTPS 적용했는데 http:// 요청은 왜 301이 떠?

| 질문 | 답변 요약 |
| --- | --- |
| 301 Moved Permanently는 오류야? | 아니야! http로 온 요청을 https로 강제 전환하는 정상 동작이야. |
| 왜 굳이 리다이렉트 해야 해? | 전체 트래픽을 암호화된 HTTPS로 통일시키기 위한 필수 보안 관례야. |
| 302가 아니라 301을 쓰는 이유는? | 영구적 리다이렉트이기 때문이야. 브라우저도 캐싱해서 지속적으로 https로 접근하게 돼. |

---

### 💡 5. certonly 명령어는 어떤 기능을 수행해?

| 질문 | 답변 요약 |
| --- | --- |
| certbot certonly는 뭐 하는 명령어야? | 인증서만 발급하고 Nginx 설정 파일은 손대지 않는 모드야. |
| 왜 Nginx 자동 설정을 안 쓰고 이걸 쓰는 거야? | nip.io는 도메인 자동 설정 지원이 제한적이라 standalone 발급이 더 안정적이기 때문이야. |
| 발급 후엔 뭘 해야 해? | 직접 `/etc/nginx/sites-available/springlab.conf` 에 SSL 경로를 넣어줘야 해. |

---

### 🌱 정리 키워드

- standalone = Certbot 자체 웹서버 모드
- 80포트 충돌 → Nginx stop 후 인증
- renewal(dry-run) 실패 = 서비스 문제 아님
- nip.io = IP 기반 임시 도메인
- http → https 리다이렉트 = 정상
- certonly = 인증서만 발급 / 설정은 수동 반영