# [REVIEW-5-3] 질문노트: 트랜잭션 & 영속성 컨텍스트 실험

> 💬 봄이가 직접 궁금해서 물어본 것들 + 온이의 설명 요약  
> (코드: com.review53 실습 기준)

---

### 💡 1. save만 해도 DB에 저장되는 거 아니야?

| 질문 | 답변 요약 |
|------|-----------|
| save만 하면 DB에 저장되니까 flush는 필요 없는 거 아냐? | 실제로는 save는 영속성 컨텍스트에만 등록될 뿐이고, flush 또는 commit 시점에서야 쿼리가 날아감. 트랜잭션 커밋 시 Spring이 자동 flush() 후 commit()해. |

---

### 💡 2. flush가 어떤 역할을 해?

| 질문 | 답변 요약 |
|------|-----------|
| flush()는 뭘 하길래 꼭 써야 해? | flush는 영속성 컨텍스트의 변경 내용을 즉시 DB에 반영하는 역할을 해. 단, flush는 commit이 아니기 때문에 rollback 가능해. |

---

### 💡 3. save 없이 flush만 하면 쿼리가 날아가?

| 질문 | 답변 요약 |
|------|-----------|
| flush만 호출해도 쿼리가 날아가? | 아니! flush가 반영할 내용이 없으면 아무 일도 안 일어나. flush 전에 반드시 save()로 영속성 컨텍스트에 등록해야 해. |

---

### 💡 4. flush 후 rollback도 돼?

| 질문 | 답변 요약 |
|------|-----------|
| flush 하고 나서 예외 나면 rollback 되나? | flush로 쿼리를 날려도 트랜잭션이 commit되지 않았으면 rollback 가능해! 그래서 flush 이후 강제 예외 던져도 DB에는 저장되지 않아. |

---

### 💡 5. 왜 setStatus 대신 updateStatus 같은 도메인 메서드를 쓰는 게 좋아?

| 질문 | 답변 요약 |
|------|-----------|
| setter 쓰면 되는데 굳이 도메인 메서드를 만들 이유가 있어? | setStatus는 단순 값 대입이라 의미를 전달하기 어려워. updateStatus 같은 메서드는 "상태 변경"이라는 도메인 행위를 표현할 수 있어서 유지보수와 확장성이 좋아져! |

---

### 🌱 정리 키워드

- save는 영속성 컨텍스트 등록, flush 또는 commit 시점에 DB 반영
- flush는 쿼리 실행만, 아직 commit 아님 → rollback 가능
- save 없이 flush만 하면 아무 쿼리도 안 나감
- flush 이후 예외 터지면 rollback → DB 반영 안 됨
- 도메인 메서드는 의도를 코드에 드러내는 설계 방식