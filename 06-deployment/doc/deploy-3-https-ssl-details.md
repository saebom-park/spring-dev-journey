# [DEPLOY-3단계] HTTPS / SSL 인증 해설

> 이 문서는 DEPLOY-3 수업자료의 💡 핵심 개념 요약을
> 
> 
> 실제 HTTPS / SSL 작동 원리와 비유로 풀어낸 확장 해설입니다.
> 
> “HTTP는 열린 편지, HTTPS는 봉인된 편지” — 암호화의 세계를 이해합니다.
> 

---

## 🔒 1️⃣ HTTPS는 무엇인가?

HTTPS = HTTP + SSL/TLS

→ 웹 통신에 **보안 계층**을 추가한 형태입니다.

| 구분 | HTTP | HTTPS |
| --- | --- | --- |
| 포트 | 80 | 443 |
| 암호화 | ❌ 평문 전송 | ✅ SSL/TLS 암호화 |
| 인증 | 없음 | 인증서 기반 서버 신원 검증 |
| 속도 | 빠름 | 약간의 오버헤드 |
| 보안 | 취약 | 안전 |

> 즉, HTTPS는 브라우저와 서버 사이의 모든 데이터를
> 
> 
> **암호화 + 신원 인증 + 무결성 보장** 형태로 주고받는 프로토콜이에요.
> 

---

## 🧩 2️⃣ SSL / TLS의 역할

SSL(TLS)은 통신을 암호화하는 **보안 계층(Security Layer)** 입니다.

서버와 클라이언트가 서로의 신뢰를 교환하며 암호키를 만들어냅니다.

```
[Client]  ⇄  [Server]
   ① 핸드셰이크 (Handshake)
   ② 인증서 교환
   ③ 세션키 생성
   ④ 암호화된 데이터 통신
```

> 쉽게 말해, 둘이 “암호를 약속”한 뒤
> 
> 
> 오직 그 둘만 알아볼 수 있는 암호 언어로 대화하는 과정이에요.
> 

---

## 🪪 3️⃣ 인증서(Certificate)란?

SSL 통신에서 **서버가 진짜인지** 증명하는 신분증 같은 파일입니다.

| 항목 | 내용 |
| --- | --- |
| 발급 기관(CA) | 신뢰된 기관 (Let’s Encrypt, DigiCert 등) |
| 주요 구성 | 공개키, 도메인, 유효기간, 발급자 서명 |
| 파일 형태 | `.pem`, `.crt`, `.key` 등 |
| 위치 | `/etc/letsencrypt/live/<도메인>/` |

> 💡 인증서가 유효하지 않으면 브라우저는 “주의: 신뢰할 수 없는 사이트” 경고를 띄웁니다.
> 
> 
> Let’s Encrypt는 이런 인증서를 **무료로 자동 발급/갱신**해주는 기관이에요.
> 

---

## ⚙️ 4️⃣ Let’s Encrypt + Certbot 동작 구조

```
사용자 (EC2 서버)
   ↓
[Certbot] ↔ [Let’s Encrypt 인증 서버]
   ↓
인증서 발급 → Nginx 설정 반영
```

| 단계 | 역할 |
| --- | --- |
| ① 도메인 검증 | `example.com` 또는 `<IP>.nip.io`의 소유자 확인 |
| ② 인증서 생성 | `/etc/letsencrypt/live/` 경로에 pem 파일 저장 |
| ③ Nginx 연동 | SSL 설정 블록에 인증서 경로 지정 |
| ④ 자동 갱신 | 90일마다 `certbot renew` 실행 (`--dry-run` 테스트 가능) |

> 인증서는 90일 단위로 갱신되며,
> 
> 
> `cron` 또는 `systemd timer`를 등록해 자동으로 관리할 수 있어요.
> 

---

## 🌍 5️⃣ HTTP → HTTPS 리다이렉트 구조

Nginx에서 두 개의 서버 블록을 사용합니다.

```
server {
    listen 80;
    return 301 https://$host$request_uri;
}
server {
    listen 443 ssl;
    ...
}
```

> 사용자가 http://로 접속하면
> 
> 
> 즉시 `https://`로 301 리다이렉트되어 **모든 통신이 암호화 채널로 전환**됩니다.
> 

---

## 🔐 6️⃣ 브라우저에서의 실제 인증 과정

1️⃣ 브라우저가 HTTPS 요청을 보냄

2️⃣ 서버가 인증서(공개키 포함)를 전달

3️⃣ 브라우저는 인증서의 신뢰체계(CA 서명)를 검증

4️⃣ 서로 암호키를 교환해 세션키 생성

5️⃣ 이후 통신은 세션키로 암호화

> 📌 즉, “인증서 신뢰 확인 → 키 교환 → 암호화 통신”이 HTTPS의 3단계 본질입니다.
> 

---

## 🧭 7️⃣ 자주 헷갈리는 개념 정리

| 질문 | 핵심 답변 |
| --- | --- |
| “SSL이랑 TLS는 다른 거야?” | TLS가 SSL의 개선 버전이에요. 현재는 TLS 1.3이 표준. |
| “HTTP와 HTTPS는 포트만 다를 뿐이야?” | 아닙니다. HTTPS는 암호화 + 인증 절차가 추가된 별도 프로토콜이에요. |
| “Let’s Encrypt는 무료인데 안전한가요?” | 네, 신뢰된 루트 인증기관(ISRG Root X1) 기반이라 브라우저에서 모두 인정됩니다. |
| “Certbot은 한 번만 설치하면 끝인가요?” | 아니요, 인증서 갱신(`certbot renew`)을 주기적으로 수행해야 합니다. |
| “IP로도 HTTPS 되나요?” | `nip.io` 같은 동적 도메인을 통해 IP 기반 SSL 가능하지만, 정식 서비스는 도메인 기반이 권장됩니다. |

---

> 💡 핵심 한 줄 요약:
> 
> 
> **HTTPS는 SSL/TLS 기반의 암호화 통신 프로토콜이며,
> 인증서로 신원을 보장하고 세션키로 데이터를 보호한다.**
> 

---

🌿 **한 줄 정리**

HTTP는 “누구나 읽을 수 있는 엽서”라면,

HTTPS는 “자물쇠로 봉인된 편지”입니다.

DEPLOY-3에서는 바로 그 **자물쇠를 서버에 다는 과정**을 완성한 거예요. 🔒