<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout('비밀번호 변경', ~{::content})}">
<body>
<section th:fragment="content" class="bb-stack bb-stack--lg">

    <div class="bb-card bb-card--spaced bb-profile-container">
        <div class="bb-card__header">
            <h1 class="bb-page-title">비밀번호 변경</h1>
            <p class="bb-page-subtitle">
                새 비밀번호를 설정해주세요.
            </p>
        </div>

        <div class="bb-card__body">

            <!-- 프로필 카드 (동일) -->
            <div class="bb-profile-header">
                <div class="bb-profile-main">
                    <div class="bb-profile-avatar"
                         th:text="${#strings.substring(member.name, 0, 1)}">
                    </div>
                    <div>
                        <div class="bb-profile-name" th:text="${member.name}"></div>
                    </div>
                </div>

                <div class="bb-profile-badge">
                    일반 회원
                </div>
            </div>

            <form th:action="@{/members/me/password/new}"
                  th:object="${passwordChangeForm}"
                  method="post"
                  class="bb-form">

                <!-- 새 비밀번호 -->
                <div class="bb-form-group">
                    <label class="bb-form-label">새 비밀번호</label>
                    <input type="password"
                           th:field="*{newPassword}"
                           class="bb-input"/>

                    <p class="bb-form-hint">
                        영문, 숫자, 특수문자를 포함하여 8자 이상으로 설정해주세요.
                    </p>

                    <div th:if="${#fields.hasErrors('newPassword')}"
                         class="bb-field-error">
                        <span class="bb-check-icon bb-check-icon--error" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M6 6L18 18M6 18L18 6"
                                      stroke="currentColor" stroke-width="2"
                                      stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        <span class="bb-check-text" th:errors="*{newPassword}"></span>
                    </div>
                </div>

                <!-- 새 비밀번호 확인 -->
                <div class="bb-form-group">
                    <label class="bb-form-label">새 비밀번호 확인</label>
                    <input type="password"
                           th:field="*{confirmPassword}"
                           class="bb-input"/>

                    <div th:if="${#fields.hasErrors('confirmPassword')}"
                         class="bb-field-error">
                        <span class="bb-check-icon bb-check-icon--error" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M6 6L18 18M6 18L18 6"
                                      stroke="currentColor" stroke-width="2"
                                      stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        <span class="bb-check-text" th:errors="*{confirmPassword}"></span>
                    </div>
                </div>

                <!-- 비밀번호 변경 시점 표시 (선택사항) -->
                <p class="bb-form-hint bb-form-hint--right"
                   th:if="${passwordChangedAt != null}"
                   th:text="'마지막 비밀번호 변경: ' + ${#temporals.format(passwordChangedAt, 'yyyy.MM.dd HH:mm')}">
                </p>

                <div class="bb-actions bb-actions--right bb-profile-actions">
                    <a th:href="@{/members/me}" class="bb-btn bb-btn--ghost">
                        취소
                    </a>
                    <button type="submit" class="bb-btn bb-btn--primary">
                        변경하기
                    </button>
                </div>

            </form>

        </div>
    </div>

</section>
</body>
</html>